<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - NS WC2014</title>
    <link href="/Content/styles/application.min.css" rel="stylesheet">
    @*@Styles.Render("~/css")*@
    @* @Scripts.Render("~/bundles/modernizr")*@

</head>
<body class="background-dark">
    <div class="logo">
        <h4>Netsize <strong>Cup 2014</strong></h4>
    </div>
    <nav id="sidebar" class="sidebar nav-collapse collapse">
        <ul id="side-nav" class="side-nav">
            <li class="panel active">
                <a href="/Home/Index">Dashboard</a>
                @*@Html.ActionLink("Dashboard", "Index", "Home")*@
            </li>
            <li class="panel">
                <a href="/Account/Index">Users</a>
                @*@Html.ActionLink("Users", "Index", "Account")*@
            </li>
            <li class="panel">
                <a href="/Team/Index">Teams</a>
                @*@Html.ActionLink("Teams", "Index", "Team")*@
            </li>
            <li class="panel">
                <a href="/Game/Index">Games</a>
                @*@Html.ActionLink("Games", "Index", "Game")*@
            </li>
            <li class="panel">
                <a href="/Game/Calendar">Calendar</a>
                @*@Html.ActionLink("Calendar", "Calendar", "Game")*@
            </li>
            <li class="panel">
                <a href="/Home/Rules">Rules</a>
                @*@Html.ActionLink("Rules", "Rules", "Home")*@
            </li>
            @if (!Request.IsAuthenticated)
            {
                <li class="panel hidden-lg hidden-md hidden-sm">
                    @Html.ActionLink("Login", "Login", "Account")
                </li>
                <li class="panel hidden-lg hidden-md hidden-sm">
                    @Html.ActionLink("Register", "Register", "Account")
                </li>
            }
            @*<li class="panel">
                    @Html.ActionLink("Scores", "Index", "Home")
                </li>
                <li class="panel">
                    @Html.ActionLink("Rules", "Index", "Home")
                </li>*@
        </ul>
        <div id="sidebar-settings" class="settings">
            @*<button class="btn-icons btn btn-transparent btn-sm" data-value="icons" type="button">Icons</button>*@
            <button class="btn-auto btn btn-transparent btn-sm" data-value="auto" type="button">Auto</button>
        </div>
    </nav>
    <div class="wrap">
        <header class="page-header">
            @Html.Partial("_LoginPartial")
        </header>
        @if (System.Configuration.ConfigurationManager.AppSettings["Environment"] == "PROD")
        {
            <script>
                (function (i, s, o, g, r, a, m) {
                    i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
                })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                ga('create', 'UA-51753642-1', 'nswc2014.azurewebsites.net');
                ga('send', 'pageview');
            </script>
        }
        <div class="content container">
            @RenderBody()
        </div>
        <div class="loader-wrap hiding hide">
            <i class="fa fa-spinner fa-spin"></i>
        </div>
        <div class="loader-wrap hiding hide">
            <i class="fa fa-spinner fa-spin"></i>
        </div>
    </div>

    <script src="/Content/lib/jquery/jquery-2.0.3.min.js"></script>
    <script src="/Content/lib/jquery-pjax/jquery.pjax.js"></script>
    <script src="/Content/lib/jquery-maskedinput/jquery.maskedinput.js"></script>
    <script src="/Content/lib/parsley/parsley.js"></script>
    <script src="/Content/lib/icheck.js/jquery.icheck.js"></script>
    <script src="/Content/lib/select2.js"></script>
    <script src="/Content/lib/backbone/underscore-min.js"></script>
    <script src="/Content/lib/bootstrap/transition.js"></script>
    <script src="/Content/lib/bootstrap/collapse.js"></script>
    <script src="/Content/lib/bootstrap/alert.js"></script>
    <script src="/Content/lib/bootstrap/tooltip.js"></script>
    <script src="/Content/lib/bootstrap/popover.js"></script>
    <script src="/Content/lib/bootstrap/button.js"></script>
    <script src="/Content/lib/bootstrap/dropdown.js"></script>
    <script src="/Content/lib/bootstrap/modal.js"></script>
    <script src="/Content/lib/bootstrap/tab.js"></script>
    <script src="/Content/lib/jquery.slimscroll.js"></script>
    <script src="/Content/js/app.js?@DateTime.UtcNow.ToString("hhmmss")"></script>
    <script src="/Content/js/settings.js"></script>
    <script src="/Content/lib/bootstrap/carousel.js"></script>
    <script src="/Content/lib/jquery-ui-1.10.3.custom.js"></script>
    <script src="/Content/lib/jquery.ui.touch-punch.js"></script>
    <script src="/Content/lib/jquery.nestable.js"></script>
    @*<script src="/Content/js/list-groups.js"></script>*@
    <script src="/Content/lib/jquery.dataTables.min.js"></script>
    <script src="/Content/lib/backbone/backbone-min.js"></script>
    <script src="/Content/lib/backbone/backbone-pageable.js"></script>
    <script src="/Content/lib/backgrid/backgrid.js"></script>
    <script src="/Content/lib/backgrid/backgrid-paginator.js"></script>
    @*<script src="/Content/js/tables-dynamic.js"></script>*@
    @*<script src="/Content/js/chat.js"></script>*@
    @*<script src="~/Scripts/jquery.signalR-2.0.3.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var chat = $.connection.chatHub;
            var inc = 0;
            // Create a function that the hub can call back to display messages.
            chat.client.addNewMessageToPage = function (name, pic, message) {
                // Add the message to the page.
                $('#chat-messages').append('<div class="chat-message"><div class="sender ' + ((inc % 2 == 0) ? 'pull-left' : 'pull-right') + '"><div class="icon"><img src="' + pic + '" class="img-circle" alt=""></div><div class="time"></div></div><div class="chat-message-body' + ((inc % 2 == 1) ? ' on-left' : '') + '"><span class="arrow"></span><div class="sender">' + htmlEncode(name) + '</div><div class="text">' + htmlEncode(message) + '</div></div></div>');
                inc++;

                var view = $("#chat-messages")[0];
                view.scrollTop = view.scrollHeight;
            };
            // Get the user name and store it to prepend to messages.
            $('#displayname').val("@User.Identity.Name");
            $('#displaypic').val("/Content/Img/2.jpg");
            // Set initial focus to message input box.
            $('#message').focus();
            // Start the connection.
            $.connection.hub.start().done(function () {
                $('#sendmessage').click(function () {
                    // Call the Send method on the hub.
                    chat.server.send($('#displayname').val(), $('#displaypic').val(), $('#message').val());
                    // Clear text box and reset focus for next comment.
                    $('#message').val('').focus();
                });
            });
        });
        // This optional function html-encodes messages for display in the page.
        function htmlEncode(value) {
            var encodedValue = $('<div />').text(value).html();
            return encodedValue;
        }
    </script>*@
    @RenderSection("Scripts", required: false)
</body>
</html>
